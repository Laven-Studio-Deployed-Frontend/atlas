datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model accounts {
  id        String      @id @default(cuid())
  name      String?
  email     String      @unique
  password  String
  avatar    String?
  admin     Boolean     @default(false)
  created   DateTime    @default(now())
  updated   DateTime    @updatedAt
  activity  activity[]
  projects  projects[]
  databases databases[]
}

model activity {
  id       String   @id @default(cuid())
  action   String
  ip       String
  owner    String
  created  DateTime @default(now())
  accounts accounts @relation(fields: [owner], references: [id], onDelete: SetNull)
}

model databases {
  id          String       @id @default(cuid())
  name        String
  description String?
  owner       String
  type        DatabaseType
  version     String
  status      String
  dsn         String?      @unique
  port        String?
  backup      String?
  created     DateTime     @default(now())
  updated     DateTime     @updatedAt
  accounts    accounts     @relation(fields: [owner], references: [id], onDelete: SetNull)
}

model projects {
  id          String    @id @default(cuid())
  name        String
  description String?
  owner       String
  created     DateTime  @default(now())
  updated     DateTime  @updatedAt
  deleted     DateTime?
  accounts    accounts  @relation(fields: [owner], references: [id], onDelete: SetNull)
}

enum DatabaseType {
  mysql
  postgres
  mariadb
  mongodb
  redis
  memcached
  rabbitmq
  couchdb
  rethinkdb
  elasticsearch
  clickhouse
}
